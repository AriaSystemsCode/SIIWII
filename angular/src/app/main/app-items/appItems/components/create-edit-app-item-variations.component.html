<div [@routerTransition]>
    <form #ProductVariationForm="ngForm" >
        <div class="kt-content kt-grid__item kt-grid__item--fluid kt-grid kt-grid--hor font-weight-normal">
            <div class="kt-subheader kt-grid__item " >
                <div [class]="containerClass">
                  <div class="kt-subheader__main">
                    <h3 class="kt-subheader__title">
                        {{ 'VariationCombinations' | localize }}
                    </h3>
                    <span class="kt-subheader__separator kt-subheader__separator--v"></span>
                    <span class="kt-subheader__desc">
                        <div class="hint">
                            <span class="mr-1">
                                <i class="bg-warn bg-warning d-inline-flex flaticon2-information rounded-circle text-white"></i>
                            </span>
                            {{ "YouCanEditYourVariationsAndChangeThePriceForEach" | localize }}.
                        </div>
                    </span>
                  </div>
                  <div class="kt-subheader__toolbar">
                    <div class="kt-subheader__wrapper">
                        <button class="btn btn-primary text-capitalize" type="button"  (click)="saveVariations()">
                            {{ "ApplyVariations" | localize }}
                        </button>
                        <button type="button" (click)="cancelVariations()" class="btn btn-light cancel text-capitalize" type="button">
                            {{ "Cancel" | localize }}
                        </button>
                    </div>
                </div>
                </div>
            </div>
            <div [class]="containerClass + ' kt-grid__item kt-grid__item--fluid mt-5'">
                <div class="kt-portlet kt-portlet--mobile">
                    <div class="kt-portlet__body pl-0 pr-0" *ngIf="!showVariationSelectionMetaData ;else editVaritaionTemplate">
                        <div class="d-inline-block custom-header border-dashed-bottom mb-4 pb-4 ml-4 mr-4">
                            <h5 class="mb-1">
                                <span >{{ (variationMatrices?.length ? "CreateYourVariations" : 'EditYourVariations') | localize }}</span>
                            </h5>
                            <p class="hint m-0 p-0">
                                {{ "SelectAnAttributeAndThenSelectTheOptionsOfTheProductsYouSell.ToSeeMoreAttributes,ClickAdd." | localize }}
                            </p>
                        </div>
                        <div class="mr-4 ml-4 mb-2">
                            <h6>{{ "Attributes" | localize }} </h6>
                            <div class="align-items-baseline d-flex flex-row justify-content-start">
                                <div class="align-items-center aria-tag-wrapper d-flex flex-wrap pb-0 pl-2 pt-1 rounded-lg">
                                    <a  class="aria-tag  border mb-3 mr-3 pl-5 pr-5 position-relative pt-2 pb-2 rounded-lg"
                                        *ngFor="let selectedExtraAttribute of selectedExtraAttributes;index  as i"
                                        [ngClass]="{'active':i == activeExtraAttributeIndex}"
                                        (click)="setActiveExtraAttribute(i)"
                                        >
                                        {{selectedExtraAttribute.name | localize}}
                                        <span (click)="removeExtraAttribute(selectedExtraAttribute,i)" class="bg-white position-absolute aria-tag-action remove-tag  rounded-circle">
                                            <i class="flaticon2-delete"></i>
                                        </span>
                                    </a>
                                </div>
                                <div class="dropdown" dropdown #dropdown="bs-dropdown" [autoClose]="false"  [insideClick]="false">
                                    <button class="btn btn-outline-primary drop-down-btn-without-icon dropdown-toggle font-weight-normal p-2"
                                        dropdownToggle>
                                        <span class="mr-1">+</span> {{ "AddAttribute" | localize }}
                                    </button>
                                    <div class="dropdown-menu pl-3 pr-3"  *dropdownMenu>
                                        <div class="form-group mb-4 pt-2">
                                            <label>
                                                <small>
                                                    {{ "AddVariationAttribute" | localize }}
                                                </small>
                                            </label>
                                            <div class="d-flex flex-column">
                                                <label for="extraAttribute_{{extraAttribute.name}}" class="align-items-center checkbox d-flex mb-1 " *ngFor="let extraAttribute of extraAttributes">
                                                    <input type="checkbox" [attr.selected]="extraAttribute.selected" [(ngModel)]="extraAttribute.selected" [value]="true"  class=" mr-2" name="extraAttributes" id="extraAttribute_{{extraAttribute.name}}"/>
                                                    <span>{{extraAttribute.name|localize}}</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div>
                                            <button class="btn btn-primary btn-sm text-capitalize mr-2" type="button" (click)="dropdown.hide()">
                                                {{ "Ok" | localize }}
                                            </button>
                                            <button class="btn btn-outline-primary btn-sm cancel text-capitalize" type="button" (click)="dropdown.hide()">
                                                {{ "Cancel" | localize }}
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="activeExtraAttributeIndex > -1 && selectedExtraAttributes" class="extra-attribute-options-wrapper pb-4 pl-4 pr-4 pt-4" >
                            <div class="tab-wrapper size-attr-tabset bg-white p-4" *ngIf="sizeExtraAttrCode == selectedExtraAttributes[activeExtraAttributeIndex].entityObjectTypeCode?.toUpperCase();else valuesSelectionelseTemp">
                                <tabset>
                                    <tab (deselect)="sizeScalesChanged(sizeScaleComponent.mapMatrixGridToAppSizeScaleDto(),sizeScaleComponent?.sizeScaleForm?.form?.valid)">
                                        <ng-template tabHeading >
                                            <span class="tab-item pl-4 pr-4">{{'SelectSizes' | localize}}</span>
                                        </ng-template>
                                        <app-size-scale 
                                            #sizeScaleComponent
                                            [oldAppSizeScaleDto]="appSizeScales"
                                            [extraAttr]="selectedExtraAttributes[activeExtraAttributeIndex]"
                                            (_submit)="sizeScalesChanged($event,sizeScaleComponent?.sizeScaleForm?.form?.valid)"
                                        >
                                        </app-size-scale>
                                    </tab>
                                    <tab >
                                        <ng-template tabHeading>
                                            <span class="tab-item pl-4 pr-4">{{'ViewSelectedSizes' | localize}}</span>
                                        </ng-template>
                                        <app-size-scale
                                            #viewSelectedSizesComponent
                                            [oldAppSizeScaleDto]="appSizeScales"
                                            [extraAttr]="selectedExtraAttributes[activeExtraAttributeIndex]"
                                            [readOnly]="true"
                                        >
                                        </app-size-scale>
                                    </tab>
                                    <tab (selectTab)="showSizeRatio()" >
                                        <ng-template tabHeading>
                                            <span class="tab-item pl-4 pr-4">{{'SizeRatio' | localize}}</span>
                                        </ng-template>
                                        <app-size-ratio
                                            #sizeRatioComponent
                                            [oldAppSizeRatios]="appSizeRatios"
                                            [appSizeScales]="appSizeScales"
                                            (StatusChanged)="sizeRatioChanged(sizeRatioComponent.appSizeRatios, sizeRatioComponent?.sizeRatioForm?.form?.valid)"
                                        >
                                        </app-size-ratio>
                                    </tab>
                                </tabset>
                            </div>
                            <ng-template #valuesSelectionelseTemp>
                                <h6 *ngIf="activeExtraAttributeIndex > -1 && selectedExtraAttributes" class="align-items-center d-flex">
                                    <span>
                                        {{selectedExtraAttributes[activeExtraAttributeIndex].name | localize }} {{ "Options" | localize }} /
                                    </span>
                                    <input type="text" class="bg-white form-control ml-2" style="width:200px" [placeholder]="('Search' | localize) + ' ' + selectedExtraAttributes[activeExtraAttributeIndex].name" (input)="filterLookup($event)">
                                </h6>
                                <div *ngIf="activeExtraAttributeIndex > -1" class="align-items-center d-flex flex-row justify-content-start pt-2">
                                    <p-selectButton
                                        [options]="selectedExtraAttributes[activeExtraAttributeIndex].displayedLookupData"
                                        multiple="multiple"
                                        [name]="selectedExtraAttributes[activeExtraAttributeIndex].name"
                                        [(ngModel)]="selectedExtraAttributes[activeExtraAttributeIndex].selectedValues"
                                        [dataKey]="'code'"
                                    >
                                    </p-selectButton>
                                    <button class="btn btn-outline-primary font-weight-normal p-2" (click)="openCreateNewAppEntityModal()" *ngIf="selectedExtraAttributes[activeExtraAttributeIndex].allowAddNew" >
                                        <span class="mr-1">+</span> {{ "AddNew" | localize }} {{selectedExtraAttributes[activeExtraAttributeIndex].name}}
                                    </button>
                                </div>
                            </ng-template>
                        </div>
                        <div class="mt-4 pl-4 pr-4">
                            <button [disabled]="!variationPossibilities" class="btn btn-primary btn-sm text-capitalize mr-2" type="button" (click)="saveExtraAtrributeSelection()">
                                {{ "Create" | localize }}
                                {{ variationPossibilities > 0 ? variationPossibilities : ' '  }}
                                {{ "Variations" | localize }}
                            </button>
                            <button class="btn btn-outline-primary btn-sm cancel text-capitalize" type="button" (click)="cancelExtraAttributeSelection()">
                                {{ "Cancel" | localize }}
                            </button>
                        </div>
                    </div>
                    <ng-template #editVaritaionTemplate>
                        <div class="kt-portlet__body pl-0-pr-0" >
                            <div class="ml-4 mr-4">
                                <div class="custom-header border-dashed-bottom pb-4 mb-4">
                                    <h5 class="mb-1">
                                        <span >
                                            {{ "AttributesAndOptionsYouâ€™veSelected" | localize }}
                                        </span>
                                    </h5>
                                    <p class="hint m-0 p-0">
                                        {{ "SelectAnAttributeAndThenSelectTheOptionsOfTheProductsYouSell.ToSeeMoreAttributes,ClickAdd." | localize }}
                                    </p>
                                </div>
                                <div class="selected-attributes-summary">
                                    <app-variations-meta-info
                                        [variations]="variationMatrices"
                                        [extraAttributes]="extraAttributes"
                                    ></app-variations-meta-info>
                                </div>
                                <div *ngIf="listingMode === undefined">
                                    <button class="btn btn-outline-primary" (click)="editExtraAtrributeSelection()">{{"RegenerateVariation" | localize}}</button>
                                </div>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>
            <div [class]="containerClass + ' kt-grid__item kt-grid__item--fluid'" >
                <div class="kt-portlet kt-portlet--mobile">
                    <div class="kt-portlet__body">
                        <p-accordion>
                            <p-accordionTab [selected]="showVariationPhotos" >
                                <p-header>
                                    <div  class="d-inline-block custom-header ml-3 pb-5">
                                        <h6 class="mb-1">
                                            {{ "AddVariationPhotos" | localize }}
                                        </h6>
                                    </div>
                                </p-header>
                                <div *ngIf="showVariationPhotos" class="row align-items-baseline mb-3 item-photos" >
                                    <div class="col-12 item-photos-header pt-4 pb-2 pl-4">
                                        <div class="d-flex flex-wrap justify-content-between">
                                            <div class="p-2 mb-2">
                                                <div class="btn-group dropdown" dropdown >
                                                    <button class="dropdown-toggle btn btn-sm font-weight-normal p-0"
                                                        dropdownToggle> {{defaultExtraAttrForAttachments.name | localize}}
                                                    </button>
                                                    <ul class="dropdown-menu actions-dropdown-menu"  *dropdownMenu>
                                                        <li *ngFor="let extraAttr of selectedExtraAttributes;let i = index">
                                                            <a (click)="setDefaultExtraAttributeForVariationAttachment(extraAttr)" >
                                                                <span>
                                                                    <i *ngIf="extraAttr == defaultExtraAttrForAttachments" class="flaticon2-check-mark text-success mr-2 icon-sm"></i>
                                                                    {{extraAttr.name | localize}}
                                                                </span>
                                                            </a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                            <div>
                                                <button  type="button" class="bg-white btn btn-hover-primary p-1 text-center" (click)="removeAllAttachments()" >
                                                    <i class="flaticon-delete m-0 p-0"></i>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-12 item-photos-body pt-4 pb-5" >
                                        <div>
                                            <a
                                            class="mr-4"
                                            *ngFor="let attachmentObj of defaultExtraAttrForAttachments.selectedValuesAttachments | keyvalue"
                                            (click)="activeAttachmentOption = attachmentObj.value"
                                            [ngClass]="{'active':activeAttachmentOption == attachmentObj.value}"
                                            >
                                                {{attachmentObj?.value?.lookupData?.label | localize}}
                                            </a>
                                        </div>
                                        <div class="row pt-3 pb-3 pl-3">
                                            <div class="image-wrapper mb-5" [ngClass]="{'upload':!attachment}" *ngFor="let attachment of activeAttachmentOption.attachmentSrcs; index as i">
                                                <label *ngIf="!attachment" class="d-flex flex-column justify-content-center h-100 align-items-center" for="variation_file_{{i}}">
                                                    <div class="align-items-end d-flex justify-content-center mb-4 upload-image-icons">
                                                        <div class="left-icon">
                                                            <i class="fa-photo-video fas" ></i>
                                                        </div>
                                                        <div class="middle-icon">
                                                            <i class="fa-clipboard-list fas" ></i>
                                                        </div>
                                                        <div class="right-icon">
                                                            <i class="fas fa-file-video "></i>
                                                        </div>
                                                    </div>
                                                    <div class="text-center">
                                                        <a class="btn btn-primary btn-sm mb-3 upload-btn">
                                                            {{ "AddAttachedFile" | localize }}
                                                        </a>
                                                        <p >
                                                            {{ "YouCanSendUpTo25MBInAttachments" | localize }} .
                                                        </p>
                                                    </div>
                                                </label>
                                                <a  *ngIf="attachment" class="d-flex flex-column justify-content-center h-100 align-items-center kt-avatar" >
                                                    <div class="d-flex flex-column justify-content-center h-100 w-100 position-absolute view-img-overlay">
                                                        <div class="text-center mb-3">
                                                            <i class="fa-photo-video fas bg-transparent text-white fa-3x" ></i>
                                                        </div>
                                                        <div class="text-center">
                                                            <button type="button" class="btn btn-dark text-white border-lg border-white" (click)="openImageViewer(attachment)">
                                                                {{ "ImagePreview" | localize }}
                                                            </button>
                                                        </div>
                                                        <div class="bg-white kt-avatar__upload" for="file" (click)="removePhoto(i)" >
                                                            <i class="fa fa-times text-danger"></i>
                                                        </div>
                                                    </div>
                                                    <img *ngIf="attachment" [src]="attachment"/>
                                                    <a class="select-default-image p-2" [ngClass]="{'d-block' : activeAttachmentOption.defaultImageIndex == i}"  (click)="setDefaultImage(i)">
                                                        <i class="fa fa-check-circle mr-2" [ngClass]="activeAttachmentOption.defaultImageIndex == i? 'text-success':'text-grey' "></i>
                                                        {{ "IsDefaultImage" | localize }}
                                                    </a>
                                                </a>
                                                <input type="file" id="variation_file_{{i}}" class="d-none" #file (change)="fileChange($event,i)">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </p-accordionTab>
                        </p-accordion>

                    </div>
                </div>
            </div>

            <div [class]="containerClass + ' kt-grid__item kt-grid__item--fluid'" >
                <div class="kt-portlet kt-portlet--mobile">
                    <div class="kt-portlet__body">
                        <p-accordion >
                            <p-accordionTab #variationCombinationTap [selected]="showVariations"  >
                                <p-header>
                                    <div class="d-inline-block custom-header ml-3 ">
                                        <h6 class="mb-1">
                                            {{ "VariationCombinations" | localize }}
                                        </h6>
                                        <p class="hint m-0 p-0">
                                            {{ "AGeneratedMatricesOfVariationCombinationWhereYouCanEditThemAsYouWant" | localize }}
                                        </p>
                                    </div>
                                </p-header>
                                <form #varitationsForm="ngForm" *ngIf="showVariations">
                                    <div class="mt-5 primeng-datatable-container variation-table thin-scroll pt-5 transparent-p-table" [busyIf]="primengTableHelper.isLoading" *ngIf="primengTableHelper?.records">
                                        <div class="mb-3 d-flex flex-row" *ngIf="selectedVaritaions.length > 0">
                                            <a class="text-primary mr-4">{{ "SelectionActions" | localize }}:</a>
                                            <div class="dropdown mr-4" dropdown #dropdown="bs-dropdown" [autoClose]="false"  [insideClick]="false">
                                                <button type="button" class="btn btn-outline-primary drop-down-btn-without-icon dropdown-toggle font-weight-normal p-2"
                                                    dropdownToggle>
                                                    {{'edit/set price' | localize}}
                                                </button>
                                                <div class="dropdown-menu pl-3 pr-3"  *dropdownMenu>
                                                    <div class="form-group mb-0">
                                                        <div class="d-flex flex-column">
                                                            <div>
                                                                <h6>
                                                                    {{ 'Enterpriceforselectedvariations' | localize }}
                                                                </h6>
                                                                <p>{{'PleaseEnterThePriceForTheSelectedItemsAfterThatThePriceWillApplyOnSelected.' | localize}}</p>
                                                            </div>
                                                            <label for="price-varitaion-set" class="align-items-center checkbox d-flex mb-1 " >
                                                                <!-- <p-inputNumber
                                                                    mode="decimal"
                                                                    #priceInput
                                                                    placeholder="Price"
                                                                    id="price-varitaion-set"
                                                                    [(ngModel)]="appItem.price"
                                                                    [name]="'price-set'"
                                                                    [min]="1"
                                                                    [styleClass]="'price form-control form-control-border-grey text-primary font-weight-bold bg-grey'"
                                                                    [minFractionDigits]="2"
                                                                    [maxFractionDigits]="2">
                                                                </p-inputNumber> -->
                                                                <input type="number"
                                                                #priceInput
                                                                placeholder="Price"
                                                                step="any"
                                                                name="price"
                                                                class="form-control price form-control form-control-border-grey text-primary font-weight-bold bg-grey"
                                                                id="price-varitaion-set"
                                                                [(ngModel)]="appItem.price"
                                                                [name]="'price-set'">

                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <button [disabled]="!priceInput.value" class="btn btn-primary btn-sm text-capitalize mr-2" type="button" (click)="setPrice(priceInput.value,dropdown)">
                                                            {{ 'Apply' | localize }}
                                                        </button>
                                                        <button class="btn btn-outline-primary btn-sm cancel text-capitalize" type="button" (click)="dropdown.hide()">
                                                            {{ 'Cancel' | localize}}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                            <div class="dropdown mr-4" *ngIf="listingMode === undefined" dropdown #dropdown="bs-dropdown" [autoClose]="true"  [insideClick]="false">
                                                <button type="button" class="btn btn-outline-primary drop-down-btn-without-icon dropdown-toggle font-weight-normal p-2"
                                                    dropdownToggle>
                                                    {{ "DeleteSelections" | localize }}
                                                </button>
                                                <div class="dropdown-menu pl-3 pr-3"  *dropdownMenu>
                                                    <div class="form-group mb-0">
                                                        <label>
                                                            <small>
                                                                {{ "DeleteSelection" | localize }}?
                                                            </small>
                                                        </label>
                                                        <div class="d-flex flex-column">
                                                            <div>
                                                                <p>
                                                                    {{ "AreYouSureYouWantToDeleteTheseVariationSelected?" | localize }}?
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <div>
                                                        <button type="button" class="btn btn-primary btn-sm text-capitalize mr-2" (click)="deleteSelectedVariations(dropdown)">
                                                            {{ "Yes" | localize }}
                                                        </button>
                                                        <button class="btn btn-outline-primary btn-sm cancel text-capitalize" type="button" (click)="dropdown.hide()">
                                                            {{ "Cancel" | localize }}
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <p-table #dataTable
                                            selectionMode="multiple"
                                            [(selection)]="selectedVaritaions"
                                            dataKey="position"
                                            [value]="primengTableHelper.records"
                                            rows="{{primengTableHelper.records.length}}"
                                            [paginator]="false"
                                            [responsive]="primengTableHelper.isResponsive">
                                            <ng-template pTemplate="header">
                                                <tr>
                                                    <th>
                                                        <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
                                                    </th>
                                                    <th>
                                                        {{ "ItemMajor" | localize }}
                                                    </th>
                                                    <th *ngFor="let extraAttr of selectedExtraAttributes">
                                                        {{extraAttr.name | localize}} {{"Code" | localize}}
                                                    </th>
                                                    <th>
                                                        {{ "VariationCode" | localize }}
                                                    </th>
                                                    <th>
                                                        {{ "Photos" | localize }}
                                                    </th>
                                                    <th >
                                                        <div>
                                                            <div class="text-center">
                                                                {{ "Price" | localize }}
                                                            </div>
                                                            <div class="d-flex justify-content-between align-items-baseline">
                                                                <p-dropdown
                                                                    [options]="currencies"
                                                                    [styleClass]="'aria-select-primeng-small'"
                                                                    [filter]="false" 
                                                                    [name]="'variation-currencies'" 
                                                                    [(ngModel)]="pricingFilter.currencyId"
                                                                    [placeholder]="'Select' | localize"
                                                                    [appendTo]="'body'"
                                                                    (ngModelChange)="checkAndAddDefaultPriceObjects()"
                                                                >
                                                                </p-dropdown>
                                                                <p-dropdown
                                                                    [options]="levels"
                                                                    [styleClass]="'aria-select-primeng-small'"
                                                                    [filter]="false" 
                                                                    [name]="'variation-levels'" 
                                                                    [(ngModel)]="pricingFilter.level"
                                                                    [placeholder]="'Select' | localize"
                                                                    [appendTo]="'body'"
                                                                    (ngModelChange)="checkAndAddDefaultPriceObjects()"
                                                                >
                                                                </p-dropdown>
                                                            </div>
                                                        </div>
                                                    </th>
                                                    <th >
                                                        {{ "AvailableQuantity" | localize }}
                                                    </th>
                                                </tr>
                                            </ng-template>
                                            <ng-template  pTemplate="body" let-record="$implicit" let-index ="rowIndex">
                                                <tr [pSelectableRow]="record">
                                                    <td >
                                                        <p-tableCheckbox [value]="record"></p-tableCheckbox>
                                                    </td>
                                                    <td>
                                                        <input type="text" readonly [value]="appItem?.code || ''" class="form-control rounded-lg pt-3 pb-3 row-item">
                                                    </td>
                                                    <td *ngFor="let entityExtraData of record.entityExtraData">
                                                        <input type="text" readonly [value]="entityExtraData?.attributeCode || entityExtraData?.attributeValueFkCode" class="form-control rounded-lg pt-3 pb-3 row-item">
                                                    </td>
                                                    <td>
                                                        <app-codes
                                                            [objectType]="entityObjectType"
                                                            [editMode]=true
                                                           [code]="record?.code"
                                                           [styles]="stylesObj"
                                                           classes="bg-white border-color"
                                                           [readonly]=true>
                                                        </app-codes>
                                                    </td>

                                                    <td>
                                                        <div class="p-3 rounded-lg row-item d-inline-block">
                                                            <img [src]="variationAttachmentsSrcs[index] || defaultAppItemImage"/>
                                                        </div>
                                                    </td>
                                                    <td >
                                                        <div *ngIf="pricingFilter.variationCorrespondingIndex && (index > -1) && pricingFilter.variationCorrespondingIndex[index] > -1">
                                                            <!-- <p-inputNumber
                                                                [ariaRequired]="true"
                                                                [(ngModel)]="record.appItemPriceInfos[pricingFilter.variationCorrespondingIndex[index]].price"
                                                                mode="decimal"
                                                                placeholder="Price"
                                                                [name]="'price_'+record.position+index"
                                                                [min]="1"
                                                                [styleClass]="'form-control rounded-lg pt-3 pb-3 row-item'"
                                                                [maxFractionDigits]="2"
                                                                [minFractionDigits]="2"
                                                                >
                                                            </p-inputNumber> -->

                                                            <input type="number"
                                                            step="any"
                                                            placeholder="Price"
                                                           [name]="'price_'+record.position+index"
                                                            class="form-control rounded-lg pt-3 pb-3 row-item"
                                                            [(ngModel)]="record.appItemPriceInfos[pricingFilter.variationCorrespondingIndex[index]].price">
                                                        </div>
                                                    </td>
                                                    <td >
                                                        <!-- <p-inputNumber
                                                            [ariaRequired]="true"
                                                            [(ngModel)]="record.stockAvailability"
                                                            mode="decimal"
                                                            placeholder="Qty"
                                                            [name]="'stockAvailability_'+record.position"
                                                            [min]="0"
                                                            [styleClass]="'form-control rounded-lg pt-3 pb-3 row-item'"
                                                            >
                                                        </p-inputNumber> -->

                                                        <input type="number"
                                                        step="any"
                                                        placeholder="Qty"
                                                        [name]="'stockAvailability_'+record.position"
                                                        class="form-control rounded-lg pt-3 pb-3 row-item"
                                                        [(ngModel)]="record.stockAvailability">
                                                    </td>
                                                </tr>
                                            </ng-template>
                                        </p-table>
                                        <div *ngIf="false && parentProductUnselectedVariations && !hideUnselectedVariations">
                                            <button class="bg-secondary btn rounded pl-3 pr-3" (click)="showUnselectedProductVariations()">{{"ShowUnselectedVariations" | localize }} ({{ parentProductUnselectedVariations?.length }})</button>
                                        </div>
                                    </div>
                                </form>
                            </p-accordionTab>
                        </p-accordion>
                    </div>
                </div>
            </div>

        </div>
    </form>
</div>

<!-- <app-selection-modal
    #appSelectionModal
    (_getAll)="handleGetAllEntityValuesList($event)"
    (_createOrEdit)="openCreateOrEdit()"
>
</app-selection-modal>

<app-generic-form-modal
    #appFormModal
    (_submit)="onCreateOrEditHandler($event)"
    (_cancel)="onCancelHandler()"
>
</app-generic-form-modal> -->